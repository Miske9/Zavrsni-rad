{% extends 'main/base.html' %}

{% block title %}Popis igrača{% endblock %}

{% block content %}
<div class="container my-4">

  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2 class="fw-bold">⚽ Popis igrača</h2>
    <a class="btn btn-success shadow" href="{% url 'main:player_create' %}">
      <i class="bi bi-plus-circle"></i> Dodaj novog igrača
    </a>
  </div>

  <form method="get" class="p-3 mb-4 rounded shadow-sm border bg-light">
    <div class="row g-2">
      <div class="col-md-2">
        <input type="text" class="form-control" name="first_name" placeholder="Ime"
          value="{{ filter_values.first_name|default_if_none:'' }}">
      </div>
      <div class="col-md-2">
        <input type="text" class="form-control" name="last_name" placeholder="Prezime"
          value="{{ filter_values.last_name|default_if_none:'' }}">
      </div>
      <div class="col-md-2">
        <input type="date" class="form-control" name="date_of_birth" value="{{ filter_values.date_of_birth }}">
      </div>
      <div class="col-md-1">
        <select class="form-select" name="category">
          <option value="">Kategorije</option>
          {% for code, label in categories %}
          <option value="{{ code }}" {% if filter_values.category == code %}selected{% endif %}>{{ label }}</option>
          {% endfor %}
        </select>
      </div>
      <div class="col-md-1">
        <select class="form-select" name="position">
          <option value="">Pozicije</option>
          {% for code, label in positions %}
          <option value="{{ code }}" {% if filter_values.position == code %}selected{% endif %}>{{ label }}</option>
          {% endfor %}
        </select>
      </div>
      <div class="col-md-2">
        <select class="form-select" name="status">
          <option value="">Svi članovi</option>
          <option value="active" {% if filter_values.status == 'active' %}selected{% endif %}>Aktivni</option>
          <option value="inactive" {% if filter_values.status == 'inactive' %}selected{% endif %}>Neaktivni</option>
        </select>
      </div>
      <div class="col-md-2">
        <button type="submit" class="btn btn-primary w-100 shadow">🔍 Filtriraj</button>
      </div>
    </div>
  </form>

  <div class="table-responsive shadow-sm rounded border">
    <table class="table table-hover align-middle">
      <thead class="table-dark">
        <tr>
          <th>Ime</th>
          <th>Prezime</th>
          <th>Datum rođenja</th>
          <th>Pozicija</th>
          <th>Kategorija</th>
          <th>Status</th>
          <th>Član od</th>
          <th>Član do</th>
        </tr>
      </thead>
      <tbody class="table-group-divider">
        {% for player in players %}
        <tr class="table-row-clickable" data-href="{% url 'main:player_detail' player.id %}">
          <td>{{ player.first_name }}</td>
          <td>{{ player.last_name }}</td>
          <td>{{ player.date_of_birth }}</td>
          <td>{{ player.position }}</td>
          <td>{{ player.category }}</td>
          <td>
            {% if player.is_active_member %}
              <span class="badge bg-success">Aktivan</span>
            {% else %}
              <span class="badge bg-danger">Neaktivan</span>
            {% endif %}
          </td>
          <td>{{ player.member_since|default:"-" }}</td>
          <td>{{ player.member_until|default:"-" }}</td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="8" class="text-center text-muted py-4">
            Nema pronađenih igrača. 😕
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

</div>
{% endblock %}