{% extends 'main/base.html' %} 
{% block title %}Sportska oprema{% endblock %}

{% block content %}
<div class="container my-4">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2 class="fw-bold text-primary">🎽 Sportska oprema</h2>
    <a class="btn btn-success shadow" href="{% url 'main:equipment_create' %}">
      <i class="bi bi-plus-circle"></i> Dodaj opremu
    </a>
  </div>

  <!-- Filter i sortiranje -->
  <form method="get" class="d-flex gap-2 mb-3">
    <select name="vrsta" class="form-select" onchange="this.form.submit()">
      <option value="">Vrste</option>
      {% for value, label in type_choices %}
        <option value="{{ value }}" {% if request.GET.vrsta == value %}selected{% endif %}>
          {{ label }}
        </option>
      {% endfor %}
    </select>
  </form>

  <!-- Tabela -->
  <div class="table-responsive shadow-sm rounded border">
    <table class="table table-hover align-middle">
      <thead class="table-dark">
        <tr>
          <th>Naziv</th>
          <th>Vrsta</th>
          <th>Količina</th>
          <th>Datum kupnje</th>
        </tr>
      </thead>
      <tbody class="table-group-divider">
        {% for item in equipment %}
        <tr class="table-row-clickable" data-href="{% url 'main:equipment_detail' item.id %}">
          <td>{{ item.name }}</td>
          <td>{{ item.get_type_display }}</td>
          <td>{{ item.quantity }}</td>
          <td>{{ item.purchase_date|default:"-" }}</td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="4" class="text-center text-muted py-4">Nema unosa opreme. 🏃</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}
